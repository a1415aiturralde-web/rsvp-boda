<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda de Alejandro & Andrea</title>
  <meta name="description" content="Preparados para el gran dia" />
  <meta name="theme-color" content="#b87b5a" />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lora&display=swap" rel="stylesheet">


  <style>
    :root {
      --brand: #b87b5a;
      --brand-2: #e8d8cc;
      --ink: #2b2b2b;
      --muted: #6b6b6b;
      --ok: #2f8f5b;
      --error: #b33a3a;
      --radius: 16px;
      --cream: rgba(250,240,240,0.40);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; padding: 0; }

    body {
      background:
        radial-gradient(60rem 60rem at 120% -10%, rgba(184,123,90,.12), transparent 60%),
        radial-gradient(60rem 60rem at -20% 110%, rgba(184,123,90,.10), transparent 60%),
        url('mi_foto_boda_v24.JPG') center/cover no-repeat;
      background-attachment: scroll;
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center top;
    }
     html, body { min-height: 100%; height: auto; }

    .header {
      text-align: center;
      display: inline-block;
      padding: 20px 24px 24px;
      margin: 20px auto 24px;
      border: 2px solid #000000;
      border-radius: 16px;
      background:rgba(255, 255, 255, 0.6);
    }

    .title {
      font-family: 'Great Vibes', cursive;
      font-size: 55px!important;
      font-weight: 700;
      color: #a00034 !important;
      margin: 0 0 12px 0;
    }

    .subtitle {
      font-family: 'Bradley Hand ITC', cursive, sans-serif;
      font-size: 24px!important;
      line-height: 1.5;
      margin: 0;
      color: #808000 !important;
      font-weight: 600;
    }

    /* Icono de portada */
#portada .icon-container {
  display: flex;
  justify-content: center;
  margin: 60px auto 24px;
  flex-wrap: wrap;
  gap: 16px;
  max-width: 720px;
}

/* Iconos de accesos */
#accesos .icon-container {
  display: flex;
  justify-content: center;  /* centra en horizontal */
  flex-wrap: wrap;          /* baja en móvil */
  gap: 16px;
  margin: 80px auto 24px;
  max-width: 720px;
}


    .icon-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      background: rgba(250,240,240,1);
      padding: 20px;
      border-radius: 16px;
      transition: transform 0.2s, box-shadow 0.2s;
      min-width: 100px;
      border: 2px solid #000000; /* ⚫ borde negro */
    }
   .icon-button span {
  font-size: 16px;          /* un poco más grande */
  text-align: center;
  color: #000;
  font-weight: 700;
  text-transform: uppercase; /* fuerza MAYÚSCULAS */
}
    #accesos .icon-button span {
  font-size: 12px; /* más pequeño solo dentro de accesos */
}
      
      #accesos .icon-button {
  padding: 12px;   /* reduce el tamaño del recuadro solo en accesos */
}
      


    .icon-button:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    .icon-img {
      width: 60px;
      height: auto;
      margin-bottom: 8px;
    }
    .icono-entrar {
  width: 80px;  /* ajusta el tamaño solo para este icono */
}


    label {
      display: inline-block;
      font-size: 20px;
      color: #000;
      margin: 12px 0 6px;
      font-weight: bold;
      background: rgba(250,240,240,0.8);
      padding: 2px 6px;
      border-radius: 4px;
      border: 2px solid #000000;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      font-size: 15px;
      background: rgba(250,240,240,0.9);
      font-weight: bold;
      color: #000;
      border: 2px solid #000000;
    }
    textarea { min-height: 96px; resize: vertical; }
    
    #rsvpForm {
  text-align: center;
}


    .radio-row { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
    .chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 18px;
      border: 2px solid var(--brand);
      border-radius: 999px;
      cursor: pointer;
      user-select: none;
      font-weight: bold;
      transition: all 0.2s ease-in-out;
      color: var(--ink);
      background: rgba(250,240,240,0.8);
      font-size: 16px;
      position: relative;
    }
    .chip input { position: absolute; opacity: 0; pointer-events: none; }
    .chip span { display: inline-block; transition: all 0.2s ease-in-out; }
    .chip input:checked + span {
      background: var(--brand);
      color: #fff;
      border-color: var(--brand);
      padding: 12px 22px;
      transform: scale(1.05);
    }

    .actions { display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 20px; }
    button[type="submit"] {
      padding: 12px 18px;
      border: 0;
      border-radius: 999px;
      background: var(--brand);
      color: #fff;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(184,123,90,.28);
    }
    button[type="submit"]:hover { filter: brightness(.97); }

    .footer { padding: 12px 24px 24px; text-align: center; font-size: 12px; color: #000; }

    @media (max-width: 480px) {
      body { padding: 12px; }
      .title { font-size: 48px !important; }
      .subtitle { font-size: 18px; line-height: 1.4; }
    }
    @media (min-width: 1024px) {
      .header { padding: 32px 48px; }
      .title { font-size: 60px !important; }
      .subtitle { font-size: 18px; }
    }

    /* Modal Asistencia */
    #asistenciaModal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
      background: url('mi_foto_boda_v6.JPG') center/cover no-repeat;
    
    }
    #asistenciaModal .asistencia-content {
      background: rgba(255, 255, 255, 0.60);
      border-radius: 12px;
      max-width: 600px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      position: relative;
      padding: 20px;
      border: 2px solid #000000; /* ⚫ borde negro */
    }
    #asistenciaModal h2 {
      text-align: center;
      font-size: 40px;
      font-weight: bold;
      color: var(--brand);
      margin: 0 auto 20px;
      font-family: 'Great Vibes', cursive;
    }
    #closeAsistencia {
  position: absolute;
  top: 10px;
  right: 15px;
  cursor: pointer;
  font-size: 24px;
  font-weight: bold;
  color: #000;
  background: none; /* quita el fondo */
  border: 2px solid #000000; /* ⚫ borde negro */
}
    #successBox, #errorBox { display: none; }
    /* Modal Traslado */
#trasladoModal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  justify-content: center;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;

  /* Fondo con imagen */
  background: url('mi_foto_boda_v2.JPG') center/cover no-repeat;
}

#trasladoModal .traslado-content {
  background: rgba(248,229,216,0.8); /* crema semitransparente */
  border-radius: 12px;
  max-width: 600px;
  width: 100%;
  max-height: 90%;
  overflow-y: auto;
  position: relative;
  padding: 20px;
  color: #000; /* texto negro */
   border: 2px solid #000000; /* ⚫ borde negro */
}

#trasladoModal h3,
#trasladoModal h4,
#trasladoModal p {
  color: #000;
}

#closeTraslado {
  position: absolute;
  top: 10px;
  right: 15px;
  cursor: pointer;
  font-size: 24px;
  font-weight: bold;
  color: #000;
  background: none; /* quita el fondo */
  border: 2px solid #000000; /* ⚫ borde negro */
}
  
   .countdown-section {
  text-align: center;
  margin: 20px auto 40px;
  padding: 20px;
  max-width: 600px;
}

.countdown-section h2 {
  font-family: 'Great Vibes', cursive; /* más elegante */
  font-size: 36px;
  margin-bottom: 20px;
  color: #a00034;
}

#countdown {
  display: flex;
  justify-content: center;
  gap: 15px;
}

.time-box {
  background: rgba(255, 245, 230, 0.9);
  border: 2px solid #c9ab83;
  border-radius: 12px;
  padding: 15px 20px;
  text-align: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);

  display: flex;               /* convierte en flexbox */
  flex-direction: column;      /* texto en columna */
  justify-content: center;     /* centra vertical */
  align-items: center;         /* centra horizontal */
  min-width: 70px;             /* ancho mínimo, pero ahora flexible */
}


.time-box span {
  display: block;
  font-size: 28px;
  font-weight: bold;
  color: var(--brand);
}

.time-box small {
  font-size: 14px;
  color: var(--ink);
  font-family: 'Playfair Display', serif;
}
    .countdown-icon {
  text-align: center;
  margin-bottom: 10px;
}

.countdown-icon img {
  width: 110px;   /* ajusta al tamaño que quieras */
  height: auto;
  display: inline-block;
}

    #closeRecuerdos {
position: absolute;
  top: 10px;
  right: 15px;
  cursor: pointer;
  font-size: 24px;
  font-weight: bold;
  color: #000;
  background: none; /* quita el fondo */
  border: 2px solid #000000; /* ⚫ borde negro */
}
    .spinner {
  border: 3px solid #f3f3f3;
  border-top: 3px solid #b87b5a;
  border-radius: 50%;
  width: 18px;
  height: 18px;
  animation: spin 1s linear infinite;
  display: inline-block;
  margin-left: 8px;
  vertical-align: middle;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
    #recuerdosModal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  justify-content: center;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;

  /* 🎉 Fondo con imagen */
  background: url('mi_foto_boda_v7.jpg') center/cover no-repeat;
}

#recuerdosModal .recuerdos-content {
  background: rgba(248,229,216,0.70); /* crema semitransparente */
  border-radius: 12px;
  max-width: 500px;
  width: 100%;
  max-height: 90%;
  overflow-y: auto;
  position: relative;
  padding: 20px;
  color: #000;
  border: 2px solid #000;
}
    #portada, #accesos {
  transition: opacity 0.8s ease-in-out, visibility 0.8s;
}

/* Estado inicial */
#portada {
  opacity: 1;
  visibility: visible;
}
#accesos {
  min-height: 100vh;
  background: url('mi_foto_boda_v24.jpg') center/cover no-repeat;
  background-attachment: scroll;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  padding: 20px 0;
  margin-top: -30px;

  /* para transición */
  opacity: 0;
  visibility: hidden;
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  transition: opacity 0.8s ease-in-out, visibility 0.8s;
}

/* Cuando se activa */
#portada.hide {
  opacity: 0;
  visibility: hidden;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
}

#accesos.show {
  opacity: 1;
  visibility: visible;
  position: relative; /* vuelve a su flujo normal */
}
   .wedding-date {
  font-size: 55px;        /* tamaño similar a la frase "Cuenta atrás" */
  font-weight: 700;
  text-align: center;
  margin: 12px 0;
  color: #a00034;         /* granate elegante */
  font-family: 'Great Vibes', cursive;
  text-transform: lowercase;  /* 👉 fuerza minúsculas */
}

.church-icon {
  text-align: center;
  margin-top: 8px;
}

.church-icon img {
  width: 60px; 
  height: auto;
  opacity: 0.9;
  animation: bounceIn 1.2s ease;
}

/* Animación */
@keyframes bounceIn {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.1);
    opacity: 1;
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
  }
}
    #portada {
  min-height: 100vh;            /* ocupa toda la ventana */
  display: flex;
  flex-direction: column;
  justify-content: center;      /* centra verticalmente */
  align-items: center;
}
    .intro-traslado {
  font-size: 16px;
  line-height: 1.5;
  margin: 15px 0 20px;
  text-align: justify;
  color: #333;
}
    /* Título del modal Traslado */
.traslado-content h3 {
  font-family: 'Playfair Display', serif;
  font-size: 26px;
  font-weight: 700;
  color: #a00034;
  text-align: center;
  margin-bottom: 15px;
}

/* Texto dentro del modal */
.traslado-content p,
.traslado-content h4 {
  font-family: 'Lora', serif;
  font-size: 17px;
  line-height: 1.6;
  text-align: center;
  color: #333;
  margin: 12px 0;
  font-weight: 700; /* 👉 ahora todo en negrita */
}

.traslado-content h4 {
  font-weight: 700;
  color: #a00034;
}
    .traslado-icon {
  text-align: center;
  margin-bottom: 10px;
}

.traslado-icon img {
  width: 60px;   /* ajusta a tu gusto */
  height: auto;
  display: inline-block;
}
    .logo-portada {
  text-align: center;
  margin: 20px 0;
}

.logo-portada img {
  width: 240px;   /* un poco más grande que el icono de entrar */
  height: auto;
  display: inline-block;
}
    .asistencia-title {
  text-align: center;
  margin-bottom: 20px;
}

.asistencia-title img {
  max-width: 100px;  /* ajusta el tamaño a tu gusto */
  height: auto;
  display: inline-block;
}
    /* Modal Ubicación */
#ubicacionModal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  justify-content: center;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;

  /* 🎉 Fondo con imagen */
  background: url('mi_foto_boda_v6.JPG') center/cover no-repeat;
}


.ubicacion-content {
  background: rgba(248,229,216,0.85);
  border-radius: 12px;
  max-width: 600px;
  width: 100%;
  max-height: 90%;
  overflow-y: auto;
  position: relative;
  padding: 20px;
  color: #000;
  border: 2px solid #000;
  text-align: center;
}

.ubicacion-icon img {
  width: 60px;
  margin-bottom: 10px;
}

.ubicacion-foto img {
  max-width: 100%;
  border-radius: 8px;
  margin: 15px 0;
}

.ubicacion-seccion {
  margin: 20px 0;
}

.ubicacion-seccion .subicono {
  width: 40px;
  display: block;
  margin: 0 auto 10px;
}



  </style>
</head>
<body>
<main id="portada">
  <header class="header">
    <h1 class="title">Boda Alejandro y Andrea</h1>
    <p class="subtitle">
      Bienvenidos a nuestro espacio de boda. Aquí podréis compartir con nosotros vuestras preferencias para que todo esté perfecto, además de encontrar información actualizada sobre la celebración.
    </p>
  </header>

  <!-- Botón único para entrar -->
  <div class="icon-container">
    <button class="icon-button" id="accesosBtn">
      <img src="mi_foto_boda_v20.png" alt="" class="icon-img icono-entrar">
      <span>Entrar</span>
    </button>
  </div>

  <!-- Logotipo -->
  <div class="logo-portada">
    <img src="mi_foto_boda_v31.png" alt="Logo Alejandro y Andrea">
  </div>
</main>


<!-- Página de accesos (oculta al inicio) -->
<section id="accesos">
  <!-- Cuenta atrás -->
  <section class="countdown-section" aria-labelledby="countdownTitle">
    <div class="countdown-icon">
      <img src="mi_foto_boda_v21.png" alt="">
    </div>
    <h2 id="countdownTitle">Cuenta Atrás</h2>
    <div id="countdown" role="timer" aria-live="polite">
      <div class="time-box"><span id="days">0</span><small>Días</small></div>
      <div class="time-box"><span id="hours">0</span><small>Horas</small></div>
      <div class="time-box"><span id="minutes">0</span><small>Min</small></div>
      <div class="time-box"><span id="seconds">0</span><small>Seg</small></div>
    </div>
  </section>


  <div class="icon-container">
    <!-- Botón para modal Ubicación -->
<button class="icon-button" id="ubicacionBtn">
  <img src="mi_foto_boda_v33.png" alt="Ubicación" class="icon-img">
  <span>Ubicación</span>
</button>
    <button class="icon-button" id="asistenciaBtn">
      <img src="mi_foto_boda_v26.png" alt="" class="icon-img">
      <span>Cuestionario de asistencia</span>
    </button>
    <button class="icon-button" id="trasladoBtn">
      <img src="mi_foto_boda_v27.png" alt="" class="icon-img">
      <span>Traslado de invitados</span>
    </button>
    <button class="icon-button" id="recuerdosBtn">
      <img src="recuerdos.png" alt="" class="icon-img">
      <span>Rincón de los recuerdos</span>
    </button>
  </div>
</section>

<footer class="footer">© Alejandro & Andrea</footer>


  <!-- Aquí siguen tus modales (Asistencia, Traslado, Recuerdos) tal cual los tienes -->

  <!-- Modal Asistencia -->
<div id="asistenciaModal" role="dialog" aria-modal="true" aria-labelledby="asistenciaTitle" style="display:none;">
  <div class="asistencia-content">
    <button id="closeAsistencia" aria-label="Cerrar formulario">✖</button>
   <div class="asistencia-title">
  <img src="mi_foto_boda_v32.png" alt="Cuestionario de asistencia">
</div>
      <form id="rsvpForm" action="https://script.google.com/macros/s/AKfycbyR0kDkPjKhyVGAqirWjeG7KxL917Tz1tfJOo17r6v06V4JT2cPcjjHyYR8_CvZ_Ab-Kg/exec" method="POST" novalidate>
        <div class="grid">
          <div class="row">
            <label for="nombre">Nombre y apellidos *</label>
            <input id="nombre" name="nombre" type="text" required placeholder="Ej. Ana Pérez" />
          </div>
          <div class="row">
            <label>¿Asistirás a la boda? *</label>
            <div class="radio-row">
              <label class="chip"><input type="radio" name="asistencia" value="sí" required /><span>Sí</span></label>
              <label class="chip"><input type="radio" name="asistencia" value="no" required /><span>No</span></label>
            </div>
          </div>
          <div class="row">
            <label for="acompanantes">¿Cuántos acompañantes?</label>
            <input id="acompanantes" name="acompanantes" type="number" min="0" max="10" value="0" />
          </div>
          <div class="row">
            <label>¿Utilizarás el servicio de autobús?</label>
            <div class="radio-row">
              <label class="chip"><input type="radio" name="autobus" value="sí" /><span>Sí</span></label>
              <label class="chip"><input type="radio" name="autobus" value="no" /><span>No</span></label>
            </div>
          </div>
        </div>
        <div class="row">
          <label for="alergias">¿Tienes alguna alergia, intolerancia o preferencia alimentaria?</label>
          <input id="alergias" name="alergias" type="text" placeholder="Ej. sin gluten, frutos secos, vegetariano..." />
        </div>
        <div class="row">
          <label for="mensaje">¿Qué canción te gusta para que suene en la fiesta?</label>
          <textarea id="mensaje" name="mensaje" placeholder=" "></textarea>
        </div>
        <div class="actions"><button type="submit">Enviar confirmación</button></div>
      </form>
      <div class="success" id="successBox" role="status" aria-live="polite">
        <h3>¡Gracias por tu respuesta! 💌</h3>
        <p>Hemos registrado tu confirmación. Puedes cerrar esta página.</p>
      </div>
      <div class="error" id="errorBox" role="alert">
        <h3>Vaya, algo no ha ido bien…</h3>
        <p>Inténtalo de nuevo en unos segundos o avisa a los novios.</p>
      </div>
    </div>
  </div>

<!-- Modal Traslado -->
<div id="trasladoModal" role="dialog" aria-modal="true" aria-labelledby="trasladoTitle" style="display:none;">
  <div class="traslado-content">
    <button id="closeTraslado" aria-label="Cerrar información de traslado">✖</button>
     <div class="traslado-icon">
      <img src="mi_foto_boda_v29.png" alt="Icono Traslado">
    </div>
    <h3 id="trasladoTitle">Traslado de invitados</h3>
    
    <!-- ✨ Introducción añadida -->
    <p class="intro-traslado">
      Cuando se acerque nuestro gran día, aquí encontraréis todos los detalles sobre el servicio de autobuses. 
      Compartiremos los horarios y puntos de recogida en Pamplona para acompañarnos hasta el banquete en el Palacio de Olloqui, 
      así como el regreso tras la fiesta para volver cómodamente a Pamplona.  
      ¡Queremos que disfrutéis al máximo, sin preocuparos de nada más que de celebrar con nosotros!
    </p>
    
<!-- 🚧 INFO DE TRASLADO (OCULTA POR AHORA) 🚧 -->
    <!-- p><strong>Ida:</strong> 13:30 desde La Cuesta Labrit (parada de autobuses).</p>
    <p><strong>Vuelta:</strong> 02:00 desde Palacio de Olloqui hasta Hotel Tres Reyes, Pamplona.</p>
    
    <h4>Taxis recomendados:</h4>
    <p>📞 Taxi Pamplona: 948 232 300<br>
       📞 Radio Taxi: 948 351 335</p> -->
  </div>
</div>
  
  <!-- Modal Ubicación -->
<div id="ubicacionModal" role="dialog" aria-modal="true" aria-labelledby="ubicacionTitle" style="display:none;">
  <div class="ubicacion-content">
    <button id="closeUbicacion" aria-label="Cerrar información de ubicación">✖</button>


    <!-- Lugar de la ceremonia -->
    <div class="ubicacion-seccion">
      <img src="mi_foto_boda_v28.png" alt="Icono ceremonia" class="subicono">
      <p><strong>Ceremonia religiosa:</strong><br>La ceremonia religiosa tendrá lugar en la Catedral de Santa María la Real de Pamplona, un lugar único y lleno de historia que hemos elegido para dar el "sí quiero".
Os esperamos el 17 de octubre de 2026 a las 12:00 del mediodía, para compartir junto a nosotros este momento tan especial.</p>
    </div>

    <!-- Lugar del banquete -->
    <div class="ubicacion-seccion">
      <img src="mi_foto_boda_v34.png" alt="Icono banquete" class="subicono">
      <p><strong>Banquete:</strong><br>Continuaremos compartiendo este día tan especial en el Palacio Cabo de Armería de Olloqui, un entorno con encanto donde disfrutaremos juntos de la comida, la celebración y, por supuesto, la fiesta hasta el final.</p>
    </div>
  </div>
</div>


 <!-- Modal Recuerdos -->
<div id="recuerdosModal" role="dialog" aria-modal="true" aria-labelledby="recuerdosTitle" style="display:none;">
  <div class="recuerdos-content">
    <button id="closeRecuerdos" aria-label="Cerrar rincón de recuerdos">✖</button>
    <h3 id="recuerdosTitle">Rincón de los recuerdos 📸</h3>
    <p>Aquí puedes subir las fotos que hayas sacado en la boda para que podamos guardarlas como recuerdo.</p>
    <form id="recuerdosForm">
      <input type="file" id="foto" name="foto" accept="image/*" multiple required><br><br>
      <button type="submit">Enviar fotos</button>
    </form>
    <div id="recuerdosMsg" style="margin-top:10px; font-size:14px;"></div>
  </div>
</div>



  <script>
document.addEventListener("DOMContentLoaded", () => {
  /* ---------- Navegación portada ↔ accesos ---------- */
  const portada = document.getElementById("portada");
  const accesos = document.getElementById("accesos");
  const accesosBtn = document.getElementById("accesosBtn");

 accesosBtn.addEventListener("click", () => {
  portada.classList.add("hide");
  accesos.classList.add("show");
  history.pushState({ page: "accesos" }, "Accesos", "#accesos");
});

window.addEventListener("popstate", (event) => {
  if (event.state && event.state.page === "accesos") {
    portada.classList.add("hide");
    accesos.classList.add("show");
  } else {
    accesos.classList.remove("show");
    portada.classList.remove("hide");
  }
});


  if (!history.state) {
    history.replaceState({ page: "portada" }, "Portada", "#portada");
  }

  /* ---------- Cuenta atrás ---------- */
  const weddingDate = new Date("Oct 17, 2026 12:00:00").getTime();
  const daysEl = document.getElementById("days");
  const hoursEl = document.getElementById("hours");
  const minutesEl = document.getElementById("minutes");
  const secondsEl = document.getElementById("seconds");

  const timer = setInterval(() => {
    const now = new Date().getTime();
    const distance = weddingDate - now;

    if (distance <= 0) {
      clearInterval(timer);
      const countdown = document.getElementById("countdown");
      countdown.innerHTML = "💍 ¡Hoy es el gran día!";
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    daysEl.textContent = days;
    hoursEl.textContent = hours;
    minutesEl.textContent = minutes;
    secondsEl.textContent = seconds;
  }, 1000);

  /* ---------- Utilidades de modales accesibles ---------- */
  let lastFocused = null;
  const focusableSelector =
    'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])';

  function trapFocus(modal, ev) {
    if (ev.key !== "Tab") return;
    const focusables = Array.from(modal.querySelectorAll(focusableSelector))
      .filter(el => !el.hasAttribute("disabled") && el.tabIndex !== -1 && el.offsetParent !== null);
    if (!focusables.length) return;
    const first = focusables[0];
    const last = focusables[focusables.length - 1];
    if (ev.shiftKey && document.activeElement === first) {
      last.focus(); ev.preventDefault();
    } else if (!ev.shiftKey && document.activeElement === last) {
      first.focus(); ev.preventDefault();
    }
  }

  function openModal(modal, opener, focusTargetSelector) {
    lastFocused = opener;
    modal.style.display = "flex";
    modal.setAttribute("tabindex", "-1"); // permite enfocar el modal
    const target = focusTargetSelector
      ? modal.querySelector(focusTargetSelector)
      : modal.querySelector("h2, h3, input, button");
    (target || modal).focus();
  }

  function closeModal(modal) {
    modal.style.display = "none";
    if (lastFocused) lastFocused.focus();
  }

  function setupModal({ opener, modal, closeBtn, focusSelector }) {
    opener.addEventListener("click", () => openModal(modal, opener, focusSelector));
    closeBtn.addEventListener("click", () => closeModal(modal));
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(modal); });
    modal.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal(modal);
      trapFocus(modal, e);
    });
  }

  /* ---------- Modal Asistencia ---------- */
  const asistenciaBtn = document.getElementById("asistenciaBtn");
  const asistenciaModal = document.getElementById("asistenciaModal");
  const closeAsistencia = document.getElementById("closeAsistencia");
  setupModal({ opener: asistenciaBtn, modal: asistenciaModal, closeBtn: closeAsistencia, focusSelector: "#nombre" });

  // Envío del formulario RSVP (con mensajes y reinicio)
(function () {
  const form = document.getElementById('rsvpForm');
  const successBox = document.getElementById('successBox');
  const errorBox = document.getElementById('errorBox');
  const submitBtn = form.querySelector("button[type='submit']");

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // 🔒 Bloquear botón y mostrar spinner
    submitBtn.disabled = true;
    const spinner = document.createElement("span");
    spinner.classList.add("spinner");
    submitBtn.appendChild(spinner);

    const data = new FormData(form);

    try {
      const response = await fetch(form.action, {
        method: form.method,
        body: data,
        headers: { 'Accept': 'application/json' }
      });

      if (response.ok) {
        form.style.display = 'none';
        errorBox.style.display = 'none';
        successBox.style.display = 'block';

        setTimeout(() => {
          asistenciaModal.style.display = "none";
          form.reset();
          form.style.display = 'block';
          successBox.style.display = 'none';

          // 🔓 Restaurar botón
          submitBtn.disabled = false;
          spinner.remove();
        }, 3000);
      } else {
        throw new Error('Error en el envío');
      }
    } catch (err) {
      form.style.display = 'none';
      successBox.style.display = 'none';
      errorBox.style.display = 'block';

      setTimeout(() => {
        errorBox.style.display = 'none';
        form.style.display = 'block';

        // 🔓 Restaurar botón
        submitBtn.disabled = false;
        spinner.remove();
      }, 3000);
    }
  });
})();


  /* ---------- Modal Traslado ---------- */
  const trasladoBtn = document.getElementById("trasladoBtn");
  const trasladoModal = document.getElementById("trasladoModal");
  const closeTraslado = document.getElementById("closeTraslado");
  setupModal({ opener: trasladoBtn, modal: trasladoModal, closeBtn: closeTraslado });

  /* ---------- Modal Recuerdos ---------- */
 const recuerdosBtn = document.getElementById("recuerdosBtn");
const recuerdosModal = document.getElementById("recuerdosModal");
const closeRecuerdos = document.getElementById("closeRecuerdos");
setupModal({ opener: recuerdosBtn, modal: recuerdosModal, closeBtn: closeRecuerdos });
  
/* ---------- Modal Ubicación ---------- */
const ubicacionBtn = document.getElementById("ubicacionBtn");
const ubicacionModal = document.getElementById("ubicacionModal");
const closeUbicacion = document.getElementById("closeUbicacion");

setupModal({ opener: ubicacionBtn, modal: ubicacionModal, closeBtn: closeUbicacion });


// Subida de fotos (limpia mensajes y evita envíos dobles)
const recuerdosForm = document.getElementById("recuerdosForm");
const recuerdosMsg = document.getElementById("recuerdosMsg");

async function readFileAsBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onloadend = () => resolve(reader.result.split(",")[1]);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

recuerdosForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  recuerdosMsg.innerHTML = ""; // limpiar mensajes previos
  const files = document.getElementById("foto").files;
  const submitBtn = recuerdosForm.querySelector('button[type="submit"]');

  if (files.length === 0) {
    recuerdosMsg.textContent = "⚠️ Selecciona al menos una foto.";
    return;
  }

  // 🔒 Bloquear botón y añadir spinner
  submitBtn.disabled = true;
  const spinner = document.createElement("span");
  spinner.classList.add("spinner");
  submitBtn.appendChild(spinner);

  for (const file of files) {
    try {
      const base64 = await readFileAsBase64(file);
      const response = await fetch("https://script.google.com/macros/s/AKfycbwN9bUuAkucwZ3kpuYLdzDqGfnIgwzyQ-q5Wz5qxleE4LRKk5_A0nZ459TZrk4E9WZDvQ/exec", {
        method: "POST",
        body: new URLSearchParams({
          foto: base64,
          nombreArchivo: file.name,
          mimeType: file.type
        })
      });
      const result = await response.json();
      if (result.status === "ok") {
        recuerdosMsg.innerHTML += `✅ ${file.name} subida correctamente<br>`;
      } else {
        recuerdosMsg.innerHTML += `❌ Error al subir ${file.name}<br>`;
      }
    } catch (err) {
      recuerdosMsg.innerHTML += `⚠️ Fallo al subir ${file.name}: ${err.message}<br>`;
    }
  }

  // 🔓 Restaurar botón y quitar spinner
  submitBtn.disabled = false;
  spinner.remove();
});
});
    
</script>

</body>
</html>









































































































































































































































































































































































